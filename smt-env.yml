name: smt
channels:
  - conda-forge
  - pytorch
  - nvidia
channel_priority: strict

dependencies:
  # --- Core ---
  - python=3.10
  - pip

  # --- PyTorch (CUDA 12.1 stable set) ---
  - pytorch=2.3.1
  - torchvision=0.18.1
  - torchaudio=2.3.1
  - pytorch-cuda=12.1  # pulls the right CUDA runtime

  # --- Imaging / OMR helpers ---
  - imagemagick>=7
  - cairo
  - pango
  - pkg-config
  - opencv
  - scikit-image
  - pillow
  - imageio
  - tifffile

  # --- ML / NLP stack ---
  - lightning
  - transformers
  - tokenizers
  - datasets
  - numpy
  - pandas
  - scipy
  - pyarrow
  - safetensors

  # --- Utils (keep essentials only; others come as deps) ---
  - jinja2
  - requests
  - rich
  - tqdm
  - psutil
  - pyyaml
  - gitpython

  # --- pip-only ---
  - pip:
      - verovio           # PyPI wheel (Linux) â†’ avoids conda resolution issues
      - wand              # Python bindings for ImageMagick
      - wandb
      - visualizer
      - names
      - wonderwords
