name: smt
channels:
  - conda-forge
  - pytorch
  - nvidia
channel_priority: strict

dependencies:
  # --- Core ---
  - python=3.12
  - pip

  # --- PyTorch (CUDA 12.1 for H100) ---
  - pytorch=2.3.1
  - torchvision=0.18.1
  - torchaudio=2.3.1
  - pytorch-cuda=12.1

  # --- Imaging (removed imagemagick - using system version) ---
  - cairo
  - pango
  - pkg-config
  - opencv
  - pillow
  - scikit-image
  
  # --- ML stack (grouped for faster resolution) ---
  - lightning
  - transformers
  - tokenizers
  - datasets
  - numpy
  - pandas
  - scipy
  - pyarrow
  - safetensors

  # --- Utils ---
  - jinja2
  - requests
  - tqdm
  - pyyaml
  
  # --- pip-only ---
  - pip:
      - verovio
      - wand              # Uses system ImageMagick 7
      - wandb
      - huggingface-hub   # Often faster via pip